# 代码组织

## 目录结构约定

```
lib/
├── core/              # 核心基础设施
├── features/          # 业务模块 (Feature-First)
│   └── editor/
│       ├── data/      # Repository Impl
│       ├── domain/    # Entity, Repository Interface
│       └── presentation/  # Widgets, Providers
└── main.dart
```

## 文件命名规范

- **Widget**: PascalCase (`TodoCard.dart`)
- **Provider**: PascalCase + `Provider` 后缀 (`TodoListProvider.dart`)
- **Entity**: PascalCase (`Todo.dart`)
- **Repository**: PascalCase + `Repository` 后缀 (`TodoRepository.dart`)
- **工具函数**: snake_case (`format_date.dart`)
- **常量**: lowerCamelCase (`app_constants.dart`)

## 导入顺序

1. Dart SDK (`dart:...`)
2. Flutter SDK (`package:flutter/...`)
3. 第三方包 (`package:...`)
4. 项目内部（`package:...` 或相对路径）
   - `core/`
   - `features/`
5. 相对导入（同目录文件）

## 开发工作流

1. **需求分析**: 确定功能属于哪个 Feature 模块
2. **接口设计**: 如果是跨层功能，先在 Domain 层定义接口
3. **自下而上实现**: 从 Domain 层开始，逐层向上
4. **测试驱动**: 每层实现后立即编写测试
5. **集成测试**: 最后进行端到端测试

## 代码审查检查清单

- [ ] 遵循分层架构原则（无循环依赖）
- [ ] Domain 层无外部依赖（Flutter、Riverpod）
- [ ] 所有策略类有单元测试
- [ ] Repository 使用接口而非实现
- [ ] 同步操作通过 SyncService
- [ ] UI 组件使用 Riverpod Providers 模式

详见: [架构分层原则](./架构分层原则.md) | [Repository模式](./Repository模式.md)

