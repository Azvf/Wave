# 监控与日志

**核心原则：结构化日志 (Structured Logging) · 远程遥测 (Remote Telemetry) · 性能监控 (Performance Monitoring)**

## 结构化日志系统

**规则**: 使用结构化日志，支持文件轮转，避免日志文件无限膨胀。

**日志级别**:
- **Verbose**: 详细调试信息（仅开发环境）
- **Info**: 一般信息（操作记录）
- **Warning**: 警告信息（非致命问题）
- **Error**: 错误信息（自动上报）

**实现位置**: `lib/core/logger/`

**文件轮转**: 单个日志文件最大 10MB，保留最近 5 个文件。

## 远程遥测

**规则**: Error 级日志自动上报，Info 级写入本地文件。

**选型建议**:
- **Sentry**: 错误追踪和性能监控（推荐）
- **Crashlytics**: Firebase 集成（可选）

**脱敏策略**:
- 自动过滤敏感信息（Token、密码、PII）
- 用户可选择禁用遥测
- 符合 GDPR/隐私法规

**实现位置**: `lib/core/telemetry/`

## 性能监控

**规则**: 针对 RAIL 模型指标进行监控。

**监控指标**:
- **Response**: 点击响应时间 < 50ms
- **Animation**: 帧率稳定 60fps (16.6ms)
- **Idle**: 后台任务不阻塞主线程 > 50ms
- **Load**: 首屏交互时间 < 2s

**实现**: 集成 APM 工具（如 Sentry Performance）追踪慢操作。

## 日志上报策略

- **Error 级**: 自动上报到远程服务
- **Warning 级**: 可选上报（用户同意后）
- **Info 级**: 仅写入本地文件
- **Verbose 级**: 仅开发环境，不上报

详见: [错误分级](../error/错误分级.md) | [错误类型](../error/错误类型.md)

