# Flutter Desktop MVP 文档中心

## 文档结构说明

根据**"代码即文档"**和**"工具强制"**的理念，文档已重构为**稳定层（Principles）**、**易变层（Reference）**和**决策记录层（ADR）**。

> 📖 **文档开发规范**: 所有文档编写和维护必须遵循 [《文档开发与维护规范》](../文档开发与维护规范.md)。

### 稳定层（Principles）- 极少变动

这些文档阐述**"为什么我们要这么做"**，是项目的灵魂：

#### 框架开发规范

1. [架构分层原则](./principles/framework/架构分层原则.md) - 分层架构、依赖规则
2. [技术选型](./principles/framework/技术选型.md) - 技术栈、选型理由
3. [代码组织](./principles/framework/代码组织.md) - 目录结构、命名规范
4. [Repository模式](./principles/framework/Repository模式.md) - Repository接口与实现
5. [监控与日志](./principles/framework/监控与日志.md) - 结构化日志、远程遥测、性能监控
6. [认证与安全](./principles/framework/认证与安全.md) - OAuth2/JWT、Token刷新、多账号隔离

#### 桌面端体验设计

1. [窗口管理](./principles/ux/窗口管理.md) - 持久化、自定义标题栏
2. [键盘优先](./principles/ux/键盘优先.md) - 快捷键、焦点管理
3. [鼠标交互](./principles/ux/鼠标交互.md) - Hover、光标感知
4. [无障碍设计](./principles/ux/无障碍设计.md) - 焦点管理、语义化
5. [深度链接](./principles/ux/深度链接.md) - URL Scheme、路由状态恢复、文件关联

#### 数据流与状态管理

1. [乐观更新](./principles/data/乐观更新.md) - 核心原则、实现模式
2. [离线优先](./principles/data/离线优先.md) - 读取策略、写入策略
3. [数据同步](./principles/data/数据同步.md) - SyncService、冲突解决

#### 错误处理

1. [错误分级](./principles/error/错误分级.md) - 三级反馈体系
2. [错误类型](./principles/error/错误类型.md) - 统一错误类型定义
3. [错误恢复](./principles/error/错误恢复.md) - 恢复策略、网络感知

### 易变层（Reference）- 自动生成/指向代码

这些文档是**"怎么做"**的参考手册，每次 Commit 都可能变化：

#### 设计系统实现

1. [ThemeExtension](./reference/design/ThemeExtension.md) - 颜色、文本样式扩展
2. [设计常量](./reference/design/设计常量.md) - 间距、圆角、尺寸
3. [响应式布局](./reference/design/响应式布局.md) - 断点、约束管理
4. [国际化指南](./reference/design/国际化指南.md) - flutter_localizations、ARB文件、RTL支持
5. [资产管理](./reference/design/资产管理.md) - flutter_gen、类型安全、资产组织

#### 工程化指南

1. [构建工作流](./reference/engineering/构建工作流.md) - 核心命令、检查流程
2. [代码生成](./reference/engineering/代码生成.md) - Riverpod、Freezed、Retrofit
3. [架构守护](./reference/engineering/架构守护.md) - Lint规则、依赖检查
4. [CI-CD](./reference/engineering/CI-CD.md) - GitHub Actions配置
5. [测试指南](./reference/engineering/测试指南.md) - 测试金字塔、Riverpod测试、Golden Tests
6. [发布指南](./reference/engineering/发布指南.md) - 代码签名、打包策略、自动更新
7. [环境配置](./reference/engineering/环境配置.md) - Dev/Staging/Prod、ConfigService、编译时注入
8. [数据库迁移](./reference/engineering/数据库迁移.md) - Schema版本控制、自动/手动迁移、回滚策略

## 架构守护工具

### 自动构建时检查

**重要**: 所有架构检查已集成到构建流程中！

运行 `flutter build` 时会自动执行：
- ✅ Dart 类型检查 (`dart analyze`)
- ✅ 代码风格检查 (`dart format`)
- ✅ 依赖架构检查（自定义 analyzer 插件）
- ✅ 代码生成检查 (`build_runner`)

如果任何检查失败，构建将停止。这确保了生产代码始终符合架构规范。

> 详细说明请查看 [构建工作流](./reference/engineering/构建工作流.md)

## 文档更新原则

1. **如果是规则，就用 Lint 报错**
2. **如果是常量，就用 ThemeExtension 生成**
3. **如果是流程，就用 Mermaid 绘图**
4. **如果是性能，就用指标量化**

这样，文档将不再是一份需要死记硬背的"法条"，而是一份阐述"为什么我们要这么做"的**战略指南**。

---

## 文档维护规范

所有文档编写和维护必须遵循 **[《文档开发与维护规范》](../文档开发与维护规范.md)**，核心原则：

- ✅ **严禁硬编码**: 文档中禁止出现代码中已定义的具体数值
- ✅ **指向而非复制**: 代码能说明的问题，文档仅保留文件路径链接
- ✅ **工具强制**: 能通过工具检查的规则，文档只解释"为什么"

---

### 决策记录层（ADR）

这些文档记录**"为什么选择某个方案"**和**"放弃了什么"**，帮助理解架构演进：

- [ADR 目录](./adr/README.md) - ADR 格式说明和索引

### 元文档（Meta）

1. [文档开发与维护规范](../文档开发与维护规范.md) - 文档编写标准
2. [文档索引](./文档索引.md) - 本文档
