# 代码生成

**核心原则：减少样板代码 (Reduce Boilerplate) · 保证一致性 (Ensure Consistency)**

## Riverpod 代码生成

**配置**: `build.yaml`

**命令**: `dart run build_runner watch -d` (开发时常驻)

**生成内容**:
- Provider 实现代码
- 类型安全的 Provider 引用

## Freezed 代码生成

**使用**: 为所有 Entity 和 Model 使用 `@freezed` 注解

**生成内容**:
- `copyWith` 方法
- `toString`、`==`、`hashCode` 实现
- JSON 序列化代码（配合 `json_serializable`）

**示例**:
```dart
@freezed
class Todo with _$Todo {
  const factory Todo({
    required String id,
    required String title,
    @Default(false) bool done,
  }) = _Todo;
  
  factory Todo.fromJson(Map<String, dynamic> json) => _$TodoFromJson(json);
}
```

## Retrofit 代码生成

**使用**: 为 API 客户端使用 `@RestApi` 注解

**生成内容**:
- API 请求方法实现
- 类型安全的请求/响应模型

**示例**:
```dart
@RestApi()
abstract class TodoApi {
  factory TodoApi(Dio dio) = _TodoApi;
  
  @GET('/todos')
  Future<List<Todo>> getTodos();
  
  @POST('/todos')
  Future<Todo> createTodo(@Body() Todo todo);
}
```

## 代码生成工作流

**开发时**: `dart run build_runner watch --delete-conflicting-outputs`

**提交前**: `dart run build_runner build --delete-conflicting-outputs`

**CI/CD**: `dart run build_runner build --delete-conflicting-outputs`

详见: [构建工作流](./构建工作流.md) | [架构守护](./架构守护.md)


