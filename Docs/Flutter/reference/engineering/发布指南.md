# 发布指南

**核心原则：代码签名 (Code Signing) · 自动更新 (Auto-Update) · 安全存储 (Secure Storage)**

## 代码签名与公证

### macOS Notarization
- **工具**: `notarytool` (Xcode 13+)
- **流程**: 签名 -> 公证 -> 分发
- **要求**: Apple Developer 账号

### Windows 签名
- **工具**: `signtool` (Windows SDK)
- **证书**: Code Signing Certificate
- **格式**: `.exe` 或 `.msix`

## 打包策略

### Windows
- **格式**: `.exe` (可执行文件) 或 `.msix` (应用包)
- **工具**: `flutter build windows`
- **分发**: 直接下载或通过 Microsoft Store

### macOS
- **格式**: `.dmg` (磁盘镜像) 或 `.app` (应用包)
- **工具**: `flutter build macos` + `create-dmg`
- **分发**: 直接下载或通过 App Store

## 自动更新方案

**选型建议**:
- **macOS**: `sparkle` (开源，成熟稳定)
- **Windows**: `msix` 自动更新 或 自建服务

**实现位置**: `lib/core/updater/`

## 安全存储配置

**规则**: 桌面端使用 `flutter_secure_storage`，需要配置平台特定依赖。

### macOS
- **后端**: Keychain
- **配置**: 自动处理，无需额外配置

### Windows
- **后端**: Windows Credential Manager
- **配置**: 自动处理，无需额外配置

**实现位置**: `lib/core/storage/secure_storage.dart`

详见: [CI-CD](./CI-CD.md) | [技术选型](../principles/framework/技术选型.md)

